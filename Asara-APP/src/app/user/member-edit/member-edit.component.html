<body>

    <div class="container slideInRight">

        <div class="toggle-buttons">
            <button class="btn" (click)="show(false, btn1, btn2)" #btn1>تغير البيانات</button>
            <button class="btn" (click)="show(true, btn1, btn2)" #btn2>تغير كلمة المُرور</button>
        </div>

        <div>
            <form [formGroup]="editUserform" (ngSubmit)="update()" class="form-group" *ngIf="!open">
                <h2>تعديل بياناتك</h2>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="user-name" type="text" class="form-control item" formControlName="username"
                            [ngClass]="{'is-invalid': f.username.errors && f.username.touched}">
                        <label for="user-name">إسمُ المُعرَّف:</label>
                    </div>

                    <div *ngIf="f.username.errors" class="invalid-feedback">
                        <div *ngIf="f.username.errors.required">من فضلك أدخِل إسم المُستخدم *</div>
                        <div *ngIf="f.username.errors.minlength">أقل عدد حُروف هو 4 فقط *</div>
                        <div *ngIf="f.username.errors.maxlength">أقصى عدد حُروف هو 8 فقط *</div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="known-as" class="form-control item" type="text"
                            [ngClass]="{'is-invalid': f.knownAs.errors && f.knownAs.touched}" formControlName="knownAs">
                        <label for="known-as">إسمُ الشُهرة:</label>
                    </div>

                    <div class="invalid-feedback" *ngIf="f.knownAs.errors">
                        <div *ngIf="f.knownAs.errors.required" (click)="f.knownAs.reset()">من فضلك أدخِل إسم الشُهرة
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="city" class="form-control item" type="tel"
                            [ngClass]="{'is-invalid': f.city.errors && f.city.touched}" formControlName="city">
                        <label for="city">إسمُ المدينة:</label>
                    </div>

                    <div class="invalid-feedback" *ngIf="f.city.errors">
                        <div *ngIf="f.city.errors.required" (click)="f.city.reset()">من فضلِك أدخِل المدينة</div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="input-2" type="tel" class="form-control" minlength="1" formControlName="telephone"
                            [ngClass]="{ 'is-invalid': f.telephone.errors && f.telephone.touched }" />
                        <label for="input-2">رقم الهاتف:</label>
                    </div>
                </div>

                <div *ngIf="f.telephone.touched && f.telephone.errors">
                    <div class="invalid-feedback" *ngIf="f.telephone.errors.required" (click)="f.telephone.reset()">
                        قُمْ بإدخال اسم المحل رجاءً
                    </div>
                    <div class="invalid-feedback" *ngIf="f.telephone.errors.maxlength || f.telephone.errors.minlength"
                        (click)="f.telephone.reset()">
                        الإسم الذي أدخلته غيرُ صحيح
                    </div>
                    <div class="invalid-feedback" *ngIf="f.telephone.errors.pattern" (click)="f.telephone.reset()">
                        قُمْ بإدخال رقم المحل صحيح
                    </div>
                </div>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="dateOfBirth" type="text" class="form-control" formControlName="dateOfBirth"
                            [ngClass]="{'is-invalid': f.dateOfBirth.errors && f.dateOfBirth.touched}"
                            (click)="dateString=dateOfBirth.value;dateOfBirth.type= 'date';"
                            (blur)="dateOfBirth.type='text';dateOfBirth.value=dateString;"
                            (change)="dateString=dateOfBirth.value;"
                            (focus)="dateString=dateOfBirth.value;dateOfBirth.type= 'date';" #dateOfBirth>
                        <label for="dateOfBirth">تاريخ الميلاد:</label>
                    </div>

                    <div *ngIf="f.dateOfBirth.errors" class="invalid-feedback">
                        <div *ngIf="f.dateOfBirth.errors.required">من فضلك أدخِل إسم المُستخدم *</div>
                    </div>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-success"
                        [disabled]="editUserform.invalid || !editUserform.touched">تعديل البيانات الآن</button>
                </div>

            </form>

            <form [formGroup]="formchangePassword" (ngSubmit)="changePassword()" class="form-group" *ngIf="open">
                <h2>تعديل كلمة المُرور</h2>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="old-pass" type="password" class="form-control" formControlName="password"
                            [ngClass]="{'is-invalid': fp.password.errors && fp.password.touched}">
                        <label for="old-pass">كلمة المُرور السابقة:</label>
                    </div>

                    <div *ngIf="fp.password.errors" class="invalid-feedback">
                        <div *ngIf="fp.password.errors.required">أدخِل كلمة المُرور من فضلِك</div>
                    </div>

                </div>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="new-pass" type="password" class="form-control" formControlName="newPassword"
                            [ngClass]="{'is-invalid': fp.newPassword.errors && fp.newPassword.touched}">
                        <label for="new-pass">كلمة المُرور الجديدة:</label>
                    </div>

                    <div *ngIf="fp.newPassword.errors" class="invalid-feedback">
                        <div *ngIf="fp.newPassword.errors.required"> من فضلِك أدخِل كلمة المُرور الجديدة</div>
                    </div>
                    <div *ngIf="fp.newPassword.errors" class="invalid-feedback">
                        <div *ngIf="fp.newPassword.errors.minlength">عدد خانات كلمة المُرور 4-12</div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="label-input flex-col">
                        <input id="confirm-new-pass" type="password" class="form-control"
                            formControlName="passwordConfirm"
                            [ngClass]="{'is-invalid': fp.passwordConfirm.errors && fp.passwordConfirm.touched || formchangePassword.hasError('mismatch')}">
                        <label for="confirm-new-pass">تأكيد كلمة المُرور الجديدة:</label>
                    </div>

                    <div *ngIf="fp.passwordConfirm.errors" class="invalid-feedback">
                        <div *ngIf="fp.passwordConfirm.errors.required">من فضلِك أدخِل كلمة المُرور</div>
                        <div *ngIf="fp.passwordConfirm.errors.mustMatch">كلمة المُرور ليست مُتطابقة</div>
                    </div>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-success" [disabled]="formchangePassword.invalid">تغيير كلمة
                        المُرور</button>
                </div>

            </form>
        </div>
    </div>

</body>
